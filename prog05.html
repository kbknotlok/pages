
<!doctype html>
<html lang="en">
	<head>
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
		<style>
			h1 { 
				margin-left: 10px;
				margin-top: 5px;
				margin-bottom: 5px;
			}
			h5 {
				margin-left: 50px;
			}
			label {
				margin-right: 5px;
				font-size: 12pt;
			}
			input[type="number"] {
				width:60px;
				margin-left: 5px;
				margin-right: 25px;
			}
		</style>
	</head>

	<body onload="InputLine.addLine();">
		<h5>Prog05 -- Kolton Kovac -- CIS255</h5>
		<h1>Add new input lines to HTML form</h1>

		<button style="margin-left:100px" class="button btn-primary" type="button" onclick="InputLine.addLine()">Add Line</button> <br /> <br />

		<div id="inputDiv" class="container"></div>

		<h1>Generate array of objects</h1>
		
		<button style="margin-left:100px" class="button btn-info" type="button" onclick="Person.genArray()">Generate and Display Array of Objects</button> <br />

		<div id="arrDiv" class="container"></div>

		<h1>Display table containing data from array of objects</h1>

		<button style="margin-left:100px" class="button btn-info" type="button" onclick="Table.display()">Generate and Display Table</button> <br /> <br />

		<div id="tableDiv" class="container"></div>


		<script>
//Global Variables
var objNum   = 0;
var objArray = [];

//Input Line class, inserts form elements into <inputDiv>
class InputLine {
	static addLine(){
		var form1 = document.getElementById("form1");
		if (form1  == null) {
			//create a new form on form load (when newLine() is called first)
			var form1 = document.createElement("form");
			newform.setAttribute("id", "form1");
			newform.setAttribute("class", "container");
			var inputDiv = documemnt.getElementById("inputDiv");
			inputDiv.appendChild(form1);
		}
		//create a new line in the form
		var d = document.createElement("div");
		d.setAttribute("class", "row");
		form1.appendChild(d);
		this.addField(d, "givenName", "Given Name: ", "text", "John");
		this.addField(d, "surName", "Sur Name: ", "text", "Smith");
		this.addField(d, "solarBirthDay", "Solar Birth Day: ", "number", "1");
		this.addField(d, "solarBirthMonth", "Solar Birth Month: ", "text", "January");
		this.addField(d, "solarBirthYear", "Solar Birth Year: ", "number", "1990");
		this.addField(d, "country", "Country: ", "text", "USA");
		objNum++;
	}

	static addField(row, inputName, labelText, dataType, placeholder) {
		//inserts one label and one input element into a row of the form
		var d = document.createElement("div");
		d.setAttribute("class", "col-sm col-md col-lg form-check-inline");
		
		var n = document.createElement("label");
		n.setAttribute("for", inputName+objNum);
		var t = document.createTextNode(labelText + " ");
		n.appendChild(t);
		d.appendChild(n);
		row.appendChild(d);

		if (inputName == "country") {
			//add select element
			var n = document.createElement("select");
			n.setAttribute("name", inputName+objNum);
			n.setAttribute("id", inputName+objNum);
			d.appendChild(n);
			
			var n = document.createElement("option");
			n.setAttribute("value", "USA");
			var textnode = document.createTextNode("USA");
			n.appendChild(textnode);
			var f = document.getElementByID(inputName+objNum);
			f.appendChild(n);
			
			var n = document.createElement("option");
			n.setAttribute("value", "China");
			var textnode = document.createTextNode("China");
			n.appendChild(textnode);
			f.appendChild(n);
		}
		else {
			var n = document.createElement("input");
			n.setAttribute("name", inputName+objNum);
			n.setAttribute("id", inputName+objNum);
			n.setAttribute("type", dataType);
			n.setAttribute("placeholder", placeholder);
			n.setAttribute("size", 10);
			d.appendChild(n);
		}
	}
}

//Person class
class Person {
	//define all person variables (properties)
	constructor(num){
		this.givenName = document.getElementById("givenName"+num).value;
		this.surName = document.getElementById("surName"+num).value;
		this.solarBirthDay = document.getElementById("solarBirthDay"+num).value;
		this.solarBirthMonth = document.getElementById("solarBirthMonth"+num).value;
		this.solarBirthYear = document.getElementById("solarBirthYear"+num).value;
		this.country = document.getElementById("country"+num).value;
		this.age = function() {
			var currentDate = new Date();
			var year = currentdate.getFullYear();
			return year - this.solarBirthYear;
		}
		this.countryAge = function() {
			if (this.country == 'China') return parseInt(this.age())+1;
			else return parseInt(this.age());
		}
		this.zodiacSign = function () {
			if (this.country=='USA'){
				if ((this.solarBirthMonth=='January' && this.solarBirthDay<=19) || (this.solarBrithMonth=='December' && this.solarBirthDay>=22)) return 'Capricorn';
				else if ((this.solarBirthMonth=='January' && this.solarBirthDay>=20) || (this.solarBirthMonth=='February' && this.solarBirthDay<=18)) return 'Aquarius';
				else if ((this.solarBirthMonth=='February' && this.solarBirthDay>=19) || (this.solarBirthMonth=='March' && this.solarBirthDay<=20)) return 'Pisces';
				else if ((this.solarBirthMonth=='March' && this.solarBirthDay>=21) || (this.solarBirthMonth=='April' && this.solarBirthDay<=19)) return 'Aries';
				else if ((this.solarBirthMonth=='April' && this.solarBirthDay>=20) || (this.solarBirthMonth=='May' && this.solarBirthDay<=20)) return 'Taurus';
				else if ((this.solarBirthMonth=='May' && this.solarBirthDay>=21) || (this.solarBirthMonth=='June' && this.solarBirthDay<=20)) return 'Gemini';
				else if ((this.solarBirthMonth=='June' && this.solarBirthDay>=21) || (this.solarBirthMonth=='July' && this.solarBirthDay<=22)) return 'Cancer';
				else if ((this.solarBirthMonth=='July' && this.solarBirthDay>=23) || (this.solarBirthMonth=='August' && this.solarBirthDay<=22)) return 'Leo';
				else if ((this.solarBirthMonth=='August' && this.solarBirthDay>=23) || (this.solarBirthMonth=='September' && this.solarBirthDay<=22)) return 'Virgo';
				else if ((this.solarBirthMonth=='September' && this.solarBirthDay>=23) || (this.solarBirthMonth=='October' && this.solarBirthDay<=22)) return 'Libra';
				else if ((this.solarBirthMonth=='October' && this.solarBirthDay>=23) || (this.solarBirthMonth=='November' && this.solarBirthDay<=21)) return 'Scorpio';
				else return 'Sagittarius';
			}
			//Chinese Zodiac
			else {
				if (this.solarBirthYear%12==0) return 'Monkey';
				else if (this.solarBirthYear%12==1) return 'Rooster';
				else if (this.solarBirthYear%12==2) return 'Dog';
				else if (this.solarBirthYear%12==3) return 'Pig';
				else if (this.solarBirthYear%12==4) return 'Rat';
				else if (this.solarBirthYear%12==5) return 'Ox';
				else if (this.solarBirthYear%12==6) return 'Tiger';
				else if (this.solarBirthYear%12==7) return 'Rabbit';
				else if (this.solarBirthYear%12==8) return 'Dragon';
				else if (this.solarBirthYear%12==9) return 'Snake';
				else if (this.solarBirthYear%12==10) return 'Horse';
				else return 'Sheep';
			}
		}
		//generates the array when the corresponding button is pressed (into <arrDiv>)
		static genArray() {
			//insert all data from the fields that are currently present into objArray
			var divContent = "<ol start='0'>";
			for (var i = 0; i < objNum; i++) {
				objArray[i] = new Person(i);
			}
			//display the array
			for (var i = 0; i < objNum; i++) {
				divContent += '<li>';
				divContent += JSON.stringify(objArray[i]);
				divContent += ' ... Age In Country: ' + objArray[i].countryAge();
				divConteny += '</li>';
			}
			divContent += '</ol>';
			document.getElementById("arrDiv").innerHTML = divContent;
		}
	}
}
//a method that modifies the Person object's prototype
Person.prototype.localName = function() {
	if (this.country == "USA") return this.givenName + " " + this.surName;
	else return this.surName + " " + this.givenName;
}
//a method that modifies the Object prototype
Object.prototype.localBirthDate = function() {
	if (this.country == "USA") return this.solarBirthMonth + " " + this.solarBirthDay + ", " + this.solarBirthYear;
	else return this.solarBirthYear + " " + this.solarBirthMonth + " " + this.solarBirthDay;
}

//Table Class, inserts a table into the <tableDiv> with the content from objArray
class Table {
	static display() {
		var content = "<table border='1' class='table table-striped'>";
		content += "<tr> <th>Local Name</th> <th>Local Date of Birth</th> <th>Local Age</th> <th>Zodiac Sign</th> </tr>";
		for (var i = 0; i < objNum; i++) {
			content += "<tr>"
			content += "<td>" + objArray[i].localName() + "</td>";
			content += "<td>" + objArray[i].localBirthDate() + "</td>";
			content += "<td>" + objArray[i].countryAge() + "</td>";
			content += "<td>" + objArray[i].zodiacSign() + "</td>";
			content += "</tr>";
		}
		content += "</table>";
		document.getElementById("tableDiv").innerHTML = content;
	}
}
		</script>
	</body>
</html>
